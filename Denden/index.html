<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,initial-scale=1.0,width=device-width"/>
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title></title>
    <link rel="stylesheet" type="text/css" href="./css/api.css" />
    <style type="text/css">
	    html,body{
	    	
	        height: 100%;
	    }

    </style>
</head>
<body>
</body>
<script type="text/javascript" src="./script/api.js"></script>
<script type="text/javascript" src="./script/db.js"></script>
<script type="text/javascript">
    apiready = function(){
    	/*
		 * 在res目录下创建   database  文件夹
		 * 
		 * 用来缓存存放数据
		 * 结构按照当前html文件路径创建。。缓存数据
		 */

		/*
		var sql = "SELECT VERSION(), CURRENT_DATE";
		initdb.sql(sql,function(ret,err){
			if( ret.status ){
				alert(JSON.stringify(ret));
			}else{
				alert(JSON.stringify(err));
			}
		});*/
		//////////////////////////////
		//      SQL
		//////////////////////////////
		
		
		
		
		
	    
	    
	    var app = $api.getStorage("Applications_signed_in");
	    $api.setStorage("Applications_signed_in",true);
	       //应用登录状态判断
	    /*
	     * 第一次安装程序，并没有启动过显示引导页
	     * 
	     * 否则就直接显示主页面
	     * 
	     */
	   
	    if( app ){
	    	
	    	fnOpenMain();
	    	
	    }else{
	      
	      openFrameGroup(function(index,name){
	
				//alert(index + name);
	
				switch (index){
	
					case 3:
						fnOpenMain();
	
						break;
				}
	
			});
	      
	    }

		//alert("FS_dir"+ api.fsDir + "c_Dir"+ api.cacheDir)

		

    
		//fnCheck();    
		fnOpenMain();
		


		
    };

	function  openFrameGroup(callBack){
		api.openFrameGroup({
			name: 'Fig_guide',
			background: '#fff',
			scrollEnabled: true,
			rect: {
				x: 0,
				y: 0,
				w: 'auto',
				h: 'auto'
			},
			index: 0,
			preload:2,
			frames: [{
				name: 'guide_1',
				url: './html/Fig_guide/guide_1.html',
				bgColor: '#fff',
				bounces:false,
				vScrollBarEnabled:false
			}, {
				name: 'guide_2',
				url: './html/Fig_guide/guide_2.html',
				bgColor: '#fff',
				bounces:false,
				vScrollBarEnabled:false
			},{
				name: 'guide_3',
				url: './html/Fig_guide/guide_3.html',
				bgColor: '#fff',
				bounces:false,
				vScrollBarEnabled:false
			},{}]
		}, function(ret, err) {
			var index = ret.index;

			if( typeof callBack == "function" ){
				callBack(index,ret.name);
			}


		});
	}


		function fnOpenMain() {
			api.openWin({
	            name: 'main',
	            url:  'widget://html/main.html',
                animation: {
                    type: 'none'
                },
                softInputMode:"resize",
                vScrollBarEnabled:false,
                hScrollBarEnabled:false
            });
		};
</script>
</html>